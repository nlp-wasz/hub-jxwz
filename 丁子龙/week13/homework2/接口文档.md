# 接口文档

## 前端

### 账户

1. 注册用户

   ```python
   register_user -->  post http://127.0.0.1:8000/v1/users/register
   ```

2. 登录用户

   ```python
   authenticate_user --> post http://127.0.0.1:8000/v1/users/login
   ```

3. 用户信息

   ```python
   get_user --> post http://127.0.0.1:8000/v1/users/info
   ```

4. 用户重置

   ```python
   alter_user --> post http://127.0.0.1:8000/v1/users/reset-info
   ```

5. 删除用户

   ```
   delete_user --> post http://127.0.0.1:8000/v1/users/delete
   ```

6. 用户列表

   ```
   get_user --> post http://127.0.0.1:8000/v1/users/info
   ```

### 股票

1. 股票搜索

   ```
   fetch_stock_codes --> get http://127.0.0.1:8000/stock/get_stock_code
   ```

2. 行业概览

   ```
   fetch_industry_codes --> get http://127.0.0.1:8000/stock/get_industry_code
   ```

3. 市场看板

   ```
   fetch_board_info --> get http://127.0.0.1:8000/stock/get_board_info
   ```

4. 股票排行

   ```
   fetch_stock_rank --> get http://127.0.0.1:8000/stock/get_stock_rank
   ```

5. 股票信息

   ```
   fetch_stock_info --> get http://127.0.0.1:8000/stock/get_stock_info
   ```

6. 股票K线图

   ```python
   fetch_k_line_data --> get http://127.0.0.1:8000/stock 
   LINE_TYPE_MAP = {
       "日K线": "/get_day_line",
       "周K线": "/get_week_line",
       "月K线": "/get_month_line",
   }
   ```

7. 当日交易

   ```
   fetch_minute_data --> http://127.0.0.1:8000/stock/get_stock_minute_data
   ```

8. 股票收藏

   ```
   _fetch_favorites --> http://127.0.0.1:8000/v1/stock/list_fav_stock
   _add_favorite --> http://127.0.0.1:8000/v1/stock/add_fav_stock
   _delete_favorite --> http://127.0.0.1:8000/v1/stock/del_fav_stock
   _clear_favorites --> http://127.0.0.1:8000/v1/stock/clear_fav_stock
   ```

### 数据

1. 数据列表
2. 数据管理

### 智能问答

1. 对话历史

   ```
   获取列表 --> http://127.0.0.1:8000/v1/chat/list
   删除聊天 --> http://127.0.0.1:8000/v1/chat/delete
   ```

   

2. 通用对话

   ```
   load_mcp_tools --> http://127.0.0.1:8900/sse
   request_chat --> http://127.0.0.1:8000/v1/chat/
   request_session_id --> http://127.0.0.1:8000/v1/chat/init
   fetch_k_line_data --> http://127.0.0.1:8000/stock/
   初始化对话 --> http://127.0.0.1:8000/v1/chat/get
   ```

### MCP调试

1. mcp列表

   ```
   load_mcp_tools --> http://127.0.0.1:8900/sse
   ```

2. mcp调试

   ```
   load_mcp_tools --> http://127.0.0.1:8900/sse
   call_mcp_tool --> client.call_tool(tool_name, arguments=filtered_kwargs)
   ```





## MCP

### 股票

1. 股票搜索

   ```
   @app.get("/get_stock_code", operation_id="get_stock_codes")
   get_all_stock_code --> get https://api.autostock.cn/v1/stock/all
   """所有股票，支持代码和名称模糊查询"""
   ```

   ```
   @app.get("/get_index_code", operation_id="get_index_code")
   get_all_index_code --> https://api.autostock.cn/v1/stock/index/all
   """所有指数，支持代码和名称模糊查询"""
   ```

2. 行业概览

   ```
   @app.get("/get_industry_code", operation_id="get_industry_code")
   get_stock_industry_code --> https://api.autostock.cn/v1/stock/industry/rank
   """获取板块数据"""
   ```

3. 市场看板

   ```
   @app.get("/get_board_info", operation_id="get_board_info")
   get_stock_board_info --> https://api.autostock.cn/v1/stock/board
   """获取大盘数据"""
   ```

4. 股票排行

   ```
   @app.get("/get_stock_rank", operation_id="get_stock_rank")
   async def get_stock_rank --> https://api.autostock.cn/v1/stock/rank
   """股票排行"""
   ```

5. 股票信息

   ```
   @app.get("/get_stock_info", operation_id="get_stock_info")
   async def get_stock_info --> https://api.autostock.cn/v1/stock
   """股票基础信息"""
   ```

6. 股票K线图

   ```
   @app.get("/get_month_line", operation_id="get_month_line")
   async def get_stock_month_kline --> https://api.autostock.cn/v1/stock/kline/month
   """月k"""
   ```

   ```
   @app.get("/get_week_line", operation_id="get_week_line")
   async def get_stock_week_kline --> https://api.autostock.cn/v1/stock/kline/week
   """周k"""
   ```

   ```
   @app.get("/get_day_line", operation_id="get_day_line")
   async def get_stock_day_kline --> https://api.autostock.cn/v1/stock/kline/day
   """日k"""
   ```

7. 当日交易

   ```
   @app.get("/get_stock_minute_data", operation_id="get_stock_minute_data")
   async def get_stock_minute_data --> https://api.autostock.cn/v1/stock/min
   """分时信息"""
   ```

8. 股票收藏

### 新闻

```
get_today_daily_news --> https://whyta.cn/api/tx/bulletin
get_douyin_hot_news --> https://whyta.cn/api/tx/douyinhot
get_github_hot_news --> https://whyta.cn/api/github
get_toutiao_hot_news --> https://whyta.cn/api/tx/topnews
get_sports_news --> https://whyta.cn/api/tx/esports
```

### 名人名言

```
get_today_familous_saying --> https://whyta.cn/api/yiyan
get_today_motivation_saying --> https://whyta.cn/api/tx/lzmy
get_today_working_saying --> https://whyta.cn/api/tx/lzmy
```

### 工具类型

```
get_city_weather --> https://whyta.cn/api/tianqi
get_address_detail --> https://whyta.cn/api/tx/addressparse
get_tel_info --> https://whyta.cn/api/tx/mobilelocal
get_scenic_info --> https://whyta.cn/api/tx/scenic
get_flower_info --> https://whyta.cn/api/tx/huayu
get_rate_transform --> https://whyta.cn/api/tx/fxrate
```



## fastapi

### 账户

1. 注册用户

   ```
   @router.post("/register")
   def user_register
   ```

2. 登录用户

   ```
   @router.post("/login")
   user_login --> services.user.user_login
   ```

3. 用户信息

   ```
   @router.post("/info")
   def user_info
   ```

4. 用户重置

   ```
   @router.post("/reset-password")
   def user_reset_password
   ```

   ```
   @router.post("/reset-info")
   def user_reset_info
   ```

5. 删除用户

   ```
   @router.post("/delete")
   def user_delete
   ```

6. 用户列表

   ```
   @router.post("/list")
   def user_list
   ```

### 股票

1. 股票收藏

   ```
   @router.post("/v1/stock/list_fav_stock")
   def get_user_all_stock
   
   @router.post("/v1/stock/del_fav_stock")
   def delete_user_stock
   
   @router.post("/v1/stock/add_fav_stock")
   def add_user_stock
   
   @router.post("/v1/stock/clear_fav_stock")
   def clear_user_stock
   
   ```

### 数据

```
@router.post("/v1/data/download")
async def download_data

@router.post("/v1/data/create")
async def create_data

@router.post("/v1/data/upload")
async def upload_data

@router.post("/v1/data/delete")
async def delete_data
```

### 智能问答

```
@router.post("/v1/chat/")
async def chat

@router.post("/v1/chat/init")
async def init_chat

@router.post("/v1/chat/get")
def get_chat

@router.post("/v1/chat/delete")
def delete_chat

@router.post("/v1/chat/list")
def list_chat

@router.post("/v1/chat/feedback")
def feedback_chat
```

```
@app.get("/v1/healthy")
def read_healthy
```

