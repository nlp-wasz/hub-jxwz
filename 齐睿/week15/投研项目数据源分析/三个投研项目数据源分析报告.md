## 概述

本报告对三个金融研报自动生成项目的数据源进行了全面分析，包括外部API数据源、网络爬虫数据以及本地数据。三个项目分别是：
- **方案-天池三轮车**：基于AI大模型的智能金融研报生成平台
- **方案-好想成为人类**：基于工作流的研报生成系统
- **方案-队伍名字不能为空**：基于Data Menu RAG的多层Agent架构

---

## 一、方案-天池三轮车

### 1.1 外部数据源（API）

#### 1.1.1 金融数据API
- **AkShare**
  - 用途：获取A股和港股财务数据
  - 主要功能：
    - `stock_financial_hk_report_em`：港股财务报表
    - `stock_zh_a_minute`：A股分钟级行情数据
    - `stock_financial_report_sina`：新浪财经财务报表
    - `stock_financial_hk_analysis_indicator_em`：港股重要指标数据
    - `stock_financial_abstract`：A股财务摘要
    - `stock_zyjs_ths`：A股主营介绍（同花顺）
    - `stock_hk_company_profile_em`：港股公司简介
  - 版本：`>=1.12.0`

- **efinance**
  - 用途：获取股票基础信息
  - 主要功能：`ef.stock.get_base_info()`
  - 版本：`>=0.5.0`

#### 1.1.2 大模型API
- **阿里云百炼平台**
  - 模型：deepseek-r1-0528, qwen-vl-max
  - 用途：研报生成、数据分析、图表描述

#### 1.1.3 向量数据库
- **Elasticsearch（阿里云）**
  - 地址：`es-cn-pe33cyg3b000lcjo4.public.elasticsearch.aliyuncs.com`
  - 用途：存储财报PDF的向量化数据，支持RAG检索
  - 索引名：`financial_report`
  - Embedding模型：bge-large-zh

### 1.2 网络爬虫数据

#### 1.2.1 搜索引擎爬虫
- **百度搜索**（`baidusearch`库）
  - 文件：`src/tool/search/baidu_search.py`
  - 用途：获取公司相关新闻和背景信息

- **Bing搜索**
  - 文件：`src/tool/search/bing_search.py`
  - 用途：备用搜索引擎

- **Google搜索**（`googlesearch-python`库）
  - 文件：`src/tool/search/google_search.py`
  - 用途：国际信息搜索

- **DuckDuckGo搜索**
  - 库：`duckduckgo-search>=3.0.0`
  - 文件：`src/tool/search/duckduckgo_search.py`
  - 用途：隐私保护的搜索引擎

- **搜狗搜索**
  - 库：`k-sogou-search`
  - 用途：中文搜索补充

#### 1.2.2 财报PDF爬虫
- **巨潮资讯网**
  - 用途：爬取上市公司近5年的财报PDF链接
  - 数据存储：Excel文件（`combined_results`文件夹）
  - 处理流程：
    1. 爬取财报链接
    2. 下载PDF到`agent_api/pdf_path`
    3. 使用MinerU2.0提取PDF内容
    4. Embedding后存储到Elasticsearch

### 1.3 本地数据

#### 1.3.1 财报数据集
位置：`combined_results/`文件夹

**A股财报数据**：
- `2020_combined_financial_reports.xlsx` (817KB)
- `2021_combined_financial_reports.xlsx` (574KB)
- `2022_combined_financial_reports.xlsx` (783KB)
- `2023_combined_financial_reports.xlsx` (864KB)
- `2024_combined_financial_reports.xlsx` (841KB)
- `2025_combined_financial_reports.xlsx` (387KB)

**港股财报数据**：
- `2020_hke_combined_financial_reports.xlsx` (254KB)
- `2021_hke_combined_financial_reports.xlsx` (268KB)
- `2022_hke_combined_financial_reports.xlsx` (329KB)
- `2023_hke_combined_financial_reports.xlsx` (361KB)
- `2024_hke_combined_financial_reports.xlsx` (354KB)
- `2025_hke_combined_financial_reports.xlsx` (174KB)

#### 1.3.2 模型文件
- **bge-large-zh**：Embedding模型（本地部署）
- **bge-reranker-base**：Rerank模型
- **MinerU2.0-2505-0.9B**：PDF抽取模型
- **PDF-Extract-Kit-1.0**：PDF提取工具包

#### 1.3.3 PDF处理输出
- 位置：`agent_api/output/`
- 内容：解析后的PDF章节和内容

---

## 二、方案-好想成为人类

### 2.1 外部数据源（API）

#### 2.1.1 金融数据API
- **AkShare**
  - 主要功能：
    - `stock_financial_hk_report_em`：港股财务报表（资产负债表、利润表、现金流量表）
    - `stock_balance_sheet_by_yearly_em`：A股资产负债表
    - `stock_profit_sheet_by_yearly_em`：A股利润表
    - `stock_cash_flow_sheet_by_yearly_em`：A股现金流量表
    - `stock_zyjs_ths`：同花顺主营介绍
    - `stock_hk_company_profile_em`：港股公司简介

#### 2.1.2 大模型API
- **火山引擎 Web API**
  - 模型：`deepseek-v3-250324`
  - 用途：智能体决策、内容生成
  - 参数：temperature = 0.7

### 2.2 网络爬虫数据

#### 2.2.1 搜索引擎爬虫
- **DuckDuckGo**（主要）
  - 库：`duckduckgo_search.DDGS`
  - 文件：`company/utils/search_engine.py`
  - 配置：region="cn-zh"

- **搜狗搜索**（备用）
  - 库：`sogou_search`
  - 回退机制：如果被拦截，自动切换到其他搜索引擎

- **Bing搜索**（备用）
  - 直接爬取Bing搜索结果页面
  - 使用BeautifulSoup解析

#### 2.2.2 搜索策略
- **自动回退机制**：Sogou → DuckDuckGo → Bing
- **缓存机制**：
  - 缓存文件：`./cache/url_cache.json`
  - 使用MD5哈希避免重复爬取
  - 记录URL、标题、描述和缓存时间

### 2.3 本地数据

#### 2.3.1 缓存数据
- 位置：`./cache/`
- 内容：URL缓存、搜索结果缓存

#### 2.3.2 工作流数据
- 位置：`output_dir/`（临时文件输出目录）
- 内容：章节生成的中间结果（YAML格式）

---

## 三、方案-队伍名字不能为空

### 3.1 外部数据源（API）

#### 3.1.1 金融数据API

**AkShare（宏观经济数据）**
- 文件：`mcps/spider/macro_akshare.py`
- 功能：动态调用AkShare的宏观经济接口
- 数据字典：`macro_data_list.json`
- 主要指标：GDP、CPI、PPI、PMI等

**AkShare（股票数据）**
- 文件：`mcps/spider/stock_akshare.py`
- 功能：股票基础数据、K线数据

**AkShare（外汇数据）**
- 文件：`mcps/spider/forex_akshare.py`
- 功能：外汇汇率数据

**AkShare（期货数据）**
- 文件：`mcps/spider/futures_akshare.py`
- 功能：期货行情数据

#### 3.1.2 官方权威数据源

**国家统计局**
- 文件：`mcps/spider/data_gjtjj.py`
- 接口：`https://data.stats.gov.cn/easyquery.htm`
- 数据类型：
  - 月度数据：价格指数、工业、能源、固定资产投资、服务业、失业率、房地产、国内贸易、对外经济、交通运输、邮电通信、PMI、财政、金融
  - 季度数据：国民经济核算、农业、工业、建筑业、人民生活、价格指数、国内贸易、文化
- 缓存：本地文件缓存机制

**人民银行统计司**
- 文件：`mcps/spider/data_rmyh.py`
- 用途：货币政策、金融统计数据

**恒生指数**
- 文件：`mcps/spider/index_hs.py`
- 用途：恒生指数历史数据
- 下载目录：`hszs_files/`

#### 3.1.3 交易所数据

**上海证券交易所**
- 文件：`mcps/spider/report_sh.py`
- 用途：上交所公告、财报

**深圳证券交易所**
- 文件：`mcps/spider/report_sz.py`
- 用途：深交所公告、财报

**香港交易所**
- 文件：`mcps/spider/report_hk.py`
- 用途：港交所公告、财报

#### 3.1.4 百度股市通
- 文件：`mcps/spider/stock_bd.py`
- 接口：`http://finance.pae.baidu.com/`
- 功能：
  1. 关键字搜索股票/板块
  2. 获取K线数据
  3. 获取三大会计报表
  4. 获取十大股东信息
  5. 获取主营业务结构
  6. 获取企业高管信息
- 认证：需要Cookie Token（`bd_stock_token`）

#### 3.1.5 雪球网
- 文件：`mcps/spider/stock_xq.py`
- 用途：股票社区数据

#### 3.1.6 新闻数据
- 文件：`mcps/spider/news.py`
- 接口：`https://finnews.cubenlp.com/search_news`
- 功能：根据关键词和时间范围搜索金融新闻
- 时间范围：默认48小时内
- 返回数量：top_k=10

#### 3.1.7 政策数据

**国务院政策文件库**
- 文件：`mcps/spider/zhengce_gwy.py`
- 用途：国务院政策文件

**政府网**
- 文件：`mcps/spider/zhengce_rmzf.py`
- 用途：政府政策公告

#### 3.1.8 大模型API
- **阿里百炼平台**
  - 模型：`qwen3-235b-a22b`（千问3）
  - 用途：内容生成、数据分析

#### 3.1.9 向量数据库
- **Milvus（Zilliz Cloud）**
  - 托管平台：阿里云
  - 用途：Data Menu RAG的向量存储
  - 配置：`zilliz_milvus_url`, `zilliz_milvus_token`, `zilliz_milvus_db_name`

### 3.2 网络爬虫数据

#### 3.2.1 财务分析数据
- 文件：`mcps/spider/financial_analysis.py`
- 用途：企业财务报表深度分析

#### 3.2.2 缓存机制
- 位置：`mcps/common/_cache/`
- 功能：
  - 多级缓存
  - 断点续传
  - 自动清理过期缓存
  - MD5哈希去重

### 3.3 本地数据

#### 3.3.1 统计局数据文件
- 位置：`mcps/spider/data_files/`
- 数量：2390个文件
- 内容：国家统计局下载的原始数据

#### 3.3.2 恒生指数文件
- 位置：`mcps/spider/hszs_files/`
- 内容：恒生指数历史数据

#### 3.3.3 字体文件
- 位置：`mcps/common/fonts/`
- 用途：图表绘制中文显示

#### 3.3.4 图表输出
- 位置：`mcps/common/_imgs/`
- 内容：生成的图表文件

#### 3.3.5 宏观数据字典
- 文件：`mcps/spider/data_files/macro_data_list.json`
- 内容：宏观经济指标的元数据配置

---

## 四、数据源对比分析

### 4.1 数据源类型对比

| 数据源类型 | 天池三轮车 | 好想成为人类 | 队伍名字不能为空 |
|-----------|----------|------------|----------------|
| **金融API** | AkShare, efinance | AkShare | AkShare (多模块) |
| **搜索引擎** | 百度、Bing、Google、DuckDuckGo、搜狗 | DuckDuckGo、搜狗、Bing | - |
| **官方数据** | - | - | 国家统计局、人民银行 |
| **交易所** | - | - | 上交所、深交所、港交所 |
| **财报爬虫** | 巨潮资讯网 | - | 百度股市通 |
| **新闻数据** | 通过搜索引擎 | 通过搜索引擎 | finnews.cubenlp.com |
| **政策数据** | - | - | 国务院、政府网 |
| **向量数据库** | Elasticsearch | - | Milvus |
| **大模型** | 阿里云百炼 | 火山引擎 | 阿里百炼 |

### 4.2 数据获取策略对比

#### 天池三轮车
- **特点**：重PDF处理和RAG检索
- **优势**：
  - 完整的财报PDF解析流程
  - 向量化存储支持语义检索
  - 多年历史数据积累
- **数据量**：约15个Excel文件，总计约5GB

#### 好想成为人类
- **特点**：轻量级、依赖搜索引擎
- **优势**：
  - 实时性强
  - 无需大量本地存储
  - 自动回退机制保证可用性
- **数据量**：主要依赖缓存，数据量小

#### 队伍名字不能为空
- **特点**：Data Menu RAG，多源权威数据
- **优势**：
  - 数据源最全面（官方+市场）
  - 多级缓存机制
  - 断点续传功能
  - 插拔式数据接入
- **数据量**：约2390个统计局文件 + 缓存数据

### 4.3 数据质量与可靠性

#### 数据源权威性排名
1. **队伍名字不能为空** - 使用国家统计局、人民银行等官方数据
2. **天池三轮车** - 使用巨潮资讯网官方财报
3. **好想成为人类** - 主要依赖搜索引擎和AkShare

#### 数据实时性
1. **好想成为人类** - 实时搜索，最新
2. **队伍名字不能为空** - 定期更新官方数据
3. **天池三轮车** - 依赖历史财报数据

#### 数据完整性
1. **队伍名字不能为空** - 覆盖宏观、行业、个股全维度
2. **天池三轮车** - 深度财报数据
3. **好想成为人类** - 依赖搜索结果，覆盖面广但深度有限

---

## 五、技术架构特点

### 5.1 天池三轮车
- **核心技术**：RAG + PDF解析 + Elasticsearch
- **数据流**：巨潮爬虫 → PDF下载 → MinerU解析 → Embedding → ES存储 → 检索生成
- **特色**：深度利用财报原始文档

### 5.2 好想成为人类
- **核心技术**：工作流 + 搜索引擎 + 智能体
- **数据流**：决策节点 → 搜索信息 → 生成章节 → 整合报告
- **特色**：轻量级、实时性强

### 5.3 队伍名字不能为空
- **核心技术**：Data Menu RAG + MCP + 多层Agent
- **数据流**：多源采集 → 数据字典 → 向量检索 → 并行生成
- **特色**：
  - 基于数据字典的RAG（避免传统RAG的信息损失）
  - 多级缓存与断点续传
  - 插拔式数据接入
  - 并行生成机制

---

## 六、总结与建议

### 6.1 各方案适用场景

**天池三轮车**：
- 适合：需要深度分析历史财报的场景
- 优势：数据深度、准确性高
- 限制：需要大量存储空间，实时性较弱

**好想成为人类**：
- 适合：快速生成、实时性要求高的场景
- 优势：轻量级、部署简单
- 限制：数据深度有限，依赖搜索引擎稳定性

**队伍名字不能为空**：
- 适合：专业投研机构，需要权威数据支撑
- 优势：数据源最全面、质量最高、架构最完善
- 限制：系统复杂度高，维护成本大

### 6.2 数据源选择建议

1. **金融数据**：优先使用AkShare（免费、稳定）
2. **宏观数据**：优先使用官方数据（国家统计局、人民银行）
3. **实时信息**：结合搜索引擎和专业新闻API
4. **财报数据**：
   - 深度分析：使用PDF解析（巨潮资讯）
   - 快速查询：使用API（AkShare、百度股市通）
5. **向量数据库**：
   - 大规模：Elasticsearch
   - 云服务：Milvus（Zilliz）

### 6.3 技术创新点

1. **Data Menu RAG**（队伍名字不能为空）
   - 解决传统RAG的信息损失问题
   - 提高检索效率和生成质量

2. **多级缓存与断点续传**（队伍名字不能为空）
   - 提高系统稳定性
   - 降低重复请求成本

3. **自动回退机制**（好想成为人类）
   - 提高搜索引擎可用性
   - 避免单点故障

4. **PDF深度解析**（天池三轮车）
   - 充分利用原始财报信息
   - 支持章节级别的精确检索

---

## 附录：关键依赖包

### 通用依赖
- `akshare>=1.12.0` - 金融数据获取
- `requests` - HTTP请求
- `pandas` - 数据处理
- `openai` - 大模型API

### 天池三轮车特有
- `efinance>=0.5.0` - 东方财富数据
- `llama-index` - RAG框架
- `elasticsearch` - 向量数据库
- `sentence-transformers` - Embedding
- `mineru==2.1.0` - PDF解析
- `baidusearch` - 百度搜索
- `googlesearch-python` - Google搜索
- `duckduckgo-search>=3.0.0` - DuckDuckGo搜索
- `k-sogou-search` - 搜狗搜索

### 好想成为人类特有
- `duckduckgo_search` - DuckDuckGo搜索
- `sogou_search` - 搜狗搜索
- `beautifulsoup4` - HTML解析

### 队伍名字不能为空特有
- `langchain==0.3.26` - Agent框架
- `pymilvus` - Milvus向量数据库客户端
- 无额外搜索引擎依赖（使用官方数据源）

---

**报告生成时间**：2025年
**分析对象**：三个金融研报自动生成项目
**数据来源**：项目源代码、README文档、依赖配置文件
