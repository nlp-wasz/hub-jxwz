1. 复现现有职能助手代码，环境要有 fastmcp、streamlit、openai-agent 库。
python mcp_server_main.py
streamlit run streamlit_demo.py

![[项目复现截图.png]]

2. 尝试新定义一个工具，进行文本情感分析，输入文本判断文本的情感类别。最终可以在界面通过agent 在对话中调用这个工具。

@mcp.tool
def sentiment_classification(text: Annotated[str, "The text to analyze"]):
    """Classifies the sentiment of a given text."""
    pass
![[情感分析工具截图.png]]

3. 尝试需要在对话中选择工具，增加 tool_filter 的逻辑。
    - 查询新闻的时候，只调用news的工具
    - 调用工具的时候，只调用tools的工具
我现在使用的是前端标签选择+FastMCP服务分端口启动的方式实现该逻辑：
前端过滤工具和问答页面显示：
![[Pasted image 20251120115647.png]]
当未选择对应工具时无法使用工具：
![[Pasted image 20251120115743.png]]
后端MCP服务器通过tag过滤启动多端口服务：

![[Pasted image 20251120115901.png]]
但是这种方法明显不太符合真正的应用场景，而且当前的调试信息略显黑盒，我后续会考虑进行优化和改进。
