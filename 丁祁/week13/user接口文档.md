

## 🚀 用户管理 API 接口文档

该文档描述了用户管理相关的 RESTful API 接口，所有接口都通过一个 **FastAPI `APIRouter`** 进行定义，基础路径为 `/v1/users`。

### 📌 基本响应结构

所有接口的返回数据都遵循统一的 `BasicResponse` 结构（假设）：

| 字段 | 类型 | 描述 |
| :--- | :--- | :--- |
| **`code`** | `int` | 状态码，例如 `200` 表示成功，`400` 表示业务错误，`404` 表示服务器/异常错误。 |
| **`message`** | `str` | 描述信息，成功或失败的原因。 |
| **`data`** | `list` / `dict` / `None` | 返回的具体数据（例如用户信息列表或单个用户信息），成功时返回。 |

---

### 🔑 1. 用户登录 (`/login`)

| 属性 | 描述 |
| :--- | :--- |
| **方法** | `POST` |
| **路径** | `/v1/users/login` |
| **功能** | 验证用户凭据并登录。 |

#### 请求体 (`RequestForUserLogin`)

| 字段 | 类型 | 描述 | 示例 |
| :--- | :--- | :--- | :--- |
| **`user_name`** | `str` | 用户名 | `"testuser"` |
| **`password`** | `str` | 密码 | `"123456"` |

#### 响应状态码

| Code | Message (示例) | 描述 |
| :--- | :--- | :--- |
| `200` | `"用户登陆成功"` | 登录成功。 |
| `400` | `"用户名或密码错误"` | 登录失败，凭据不匹配。 |
| `404` | *Traceback* | 异常错误。 |

---

### 📝 2. 用户注册 (`/register`)

| 属性 | 描述 |
| :--- | :--- |
| **方法** | `POST` |
| **路径** | `/v1/users/register` |
| **功能** | 创建新用户账户。 |

#### 请求体 (`RequestForUserRegister`)

| 字段 | 类型 | 描述 | 示例 |
| :--- | :--- | :--- | :--- |
| **`user_name`** | `str` | 用户名 (唯一) | `"newuser"` |
| **`password`** | `str` | 密码 | `"securepass"` |
| **`user_role`** | *Any* | 用户角色 | `"admin"` / `"guest"` |

#### 响应状态码

| Code | Message (示例) | 描述 |
| :--- | :--- | :--- |
| `200` | `"用户注册成功"` | 注册成功。 |
| `400` | `"用户名已存在"` | 注册失败，用户名已占用。 |
| `404` | *Traceback* | 异常错误。 |

---

### 🔄 3. 重置密码 (`/reset-password`)

| 属性 | 描述 |
| :--- | :--- |
| **方法** | `POST` |
| **路径** | `/v1/users/reset-password` |
| **功能** | 验证旧密码后，重置用户的密码。 |

#### 请求体 (`RequestForUserResetPassword`)

| 字段 | 类型 | 描述 | 示例 |
| :--- | :--- | :--- | :--- |
| **`user_name`** | `str` | 用户名 | `"testuser"` |
| **`password`** | `str` | 当前（旧）密码 | `"123456"` |
| **`new_password`** | `str` | 新密码 | `"newsecurepass"` |

#### 响应状态码

| Code | Message (示例) | 描述 |
| :--- | :--- | :--- |
| `200` | `"密码重置成功"` | 密码更新成功。 |
| `400` | `"用户名或密码错误"` | 验证旧密码失败。 |
| `404` | *Traceback* | 异常错误。 |

---

### 👤 4. 获取用户信息 (`/info`)

| 属性 | 描述 |
| :--- | :--- |
| **方法** | `POST` |
| **路径** | `/v1/users/info` |
| **功能** | 根据用户名获取单个用户的详细信息。 |

#### 请求体

* **参数类型**: **查询参数或请求体字段** (根据代码，它接收一个名为 `user_name` 的参数，通常 POST 请求会将其视为请求体字段或表单数据)。
* **字段**: `user_name` (`str`) - 要查询的用户名。

#### 响应状态码

| Code | Message (示例) | Data (示例) | 描述 |
| :--- | :--- | :--- | :--- |
| `200` | `"获取用户信息成功"` | `[{user_info_object}]` | 成功返回用户信息。 |
| `400` | `"用户不存在"` | `[]` | 查询的用户不存在。 |
| `404` | *Traceback* | `[]` | 异常错误。 |

---

### 🛠️ 5. 修改用户信息 (`/reset-info`)

| 属性 | 描述 |
| :--- | :--- |
| **方法** | `POST` |
| **路径** | `/v1/users/reset-info` |
| **功能** | 修改用户的角色或状态。 |

#### 请求体 (`RequestForUserChangeInfo`)

| 字段 | 类型 | 描述 | 示例 |
| :--- | :--- | :--- | :--- |
| **`user_name`** | `str` | 用户名 | `"testuser"` |
| **`user_role`** | *Optional* | 新的用户角色（如果提供则修改） | `"supervisor"` |
| **`status`** | *Optional* | 新的用户状态（如果提供则修改） | `"active"` / `"inactive"` |

#### 响应状态码

| Code | Message (示例) | 描述 |
| :--- | :--- | :--- |
| `200` | `"用户信息修改成功"` | 修改成功。 |
| `400` | `"用户不存在"` | 要修改的用户不存在。 |
| `404` | *Traceback* | 异常错误。 |

---

### 🗑️ 6. 删除用户 (`/delete`)

| 属性 | 描述 |
| :--- | :--- |
| **方法** | `POST` |
| **路径** | `/v1/users/delete` |
| **功能** | 根据用户名删除用户账户。 |

#### 请求体

* **参数类型**: **查询参数或请求体字段** (接收一个名为 `user_name` 的参数)。
* **字段**: `user_name` (`str`) - 要删除的用户名。

#### 响应状态码

| Code | Message (示例) | 描述 |
| :--- | :--- | :--- |
| `200` | `"用户删除成功"` | 删除成功。 |
| `400` | `"用户不存在"` | 要删除的用户不存在。 |
| `404` | *Traceback* | 异常错误。 |

---

### 📋 7. 用户列表 (`/list`)

| 属性 | 描述 |
| :--- | :--- |
| **方法** | `POST` |
| **路径** | `/v1/users/list` |
| **功能** | 获取所有用户的列表信息。 |

#### 请求体

* **无**

#### 响应状态码

| Code | Message (示例) | Data (示例) | 描述 |
| :--- | :--- | :--- | :--- |
| `200` | `"ok"` | `[{user_info_1}, {user_info_2}, ...]` | 成功返回用户列表。 |
| `404` | *Traceback* | `[]` | 异常错误。 |

---

