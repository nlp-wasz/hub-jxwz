1. 文档处理：从非结构到结构化
- 解析：PDF转Markdown，完整保留“建模背景、核心公式、参数定义”三大模块；

- 拆分：提取公式语义、数学表达式、参数（含含义/单位），形成机器可识别的结构化数据。

2. 数据准备：嵌入生成与工具构建

- 嵌入向量：将“背景+公式+参数”转语义向量，捕捉核心特征；

- MCP工具：自动生成标准化计算函数，具备参数注解与执行能力；

- 双存储：向量、文本、MCP信息存入数据库，MCP代码独立存入工具库。

3. RAG检索：精准匹配候选工具

- 提问转化：用户提问生成语义向量；

- 混合搜索：结合向量匹配（语义）与关键词匹配（公式/参数）初步筛选；

- 重排序：专业模型打分，输出TOP-8最优MCP工具。

4. 工具执行：智能计算与结果返回

- 工具筛选：大模型分析需求，从TOP-8中选1-3个最优工具并提取参数；

- 计算执行：MCP Server调用工具，代入参数完成计算；

- 结果输出：整合“计算结果+公式+参数说明+业务解释”，形成可追溯回复。

