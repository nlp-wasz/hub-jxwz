# 文档公式智能问答系统

## 项目概述

这是一个基于文档公式解析与智能问答的系统，能够解析技术文档中的数学公式，并将其封装为可执行的MCP工具。系统结合RAG技术和符号计算引擎，实现了高精度的公式检索和计算。

## 功能特点

1. **公式解析**：从技术文档中提取和解析数学公式
2. **MCP工具封装**：将公式封装为可执行的MCP工具
3. **智能检索**：使用RAG技术根据用户问题检索相关公式
4. **精确计算**：使用SymPy和NumPy进行高精度符号计算
5. **自然语言交互**：支持自然语言的问题输入和结果展示

## 系统架构

```
用户问题
    ↓
RAG公式检索 ←→ 公式知识库
    ↓
MCP客户端调用 ←→ MCP服务(公式计算引擎)
    ↓
结果返回
```

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

1. 启动MCP服务：
```bash
python formula_tools.py
```

2. 在另一个终端运行主程序：
```bash
python main.py
```

## 支持的公式类型

1. 农业产量预测模型
2. 多维指标综合评分函数
3. 单自由度系统动力响应模型
4. 化工反应效率预测模型
5. 汽车油耗预测模型
6. 作物生长速率模型
7. 交通流速度动态模型
8. 化工过程效率模型
9. 文化传播影响力增长模型
10. 作物生长动态模型

## 示例问题

- "温度25度，降水量600mm，施肥量100，光照10小时，土壤质量0.8时的作物产量是多少？"
- "当a=1,b=2,c=3,d=4,e=5时，综合评分是多少？"
- "汽车以80km/h速度行驶，载重1000kg时的百公里油耗是多少？"

## 项目结构

```
formula_qa_system/
├── formula_tools.py     # MCP工具定义和服务端
├── main.py             # 主程序和MCP客户端
├── requirements.txt    # 依赖包
└── readme.md          # 说明文档
```

## 架构说明

本系统采用MCP（Microservice Control Protocol）架构，将公式计算功能封装为独立的微服务：

1. **formula_tools.py**：作为MCP服务端运行，提供10个数学公式计算工具
2. **main.py**：作为MCP客户端运行，负责问题理解、公式检索和结果展示

这种架构的优势：
- 工具服务与应用逻辑分离，便于维护和扩展
- 支持分布式部署，提高系统可伸缩性
- 工具可以被多个客户端复用