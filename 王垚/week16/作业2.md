
#### 1. 距离阈值判断逻辑错误
**位置**: `SemanticCache.py:66-70`
```python
# 错误代码
dis, ind = self.index.search(embedding, k=100)
if dis[0][0] > self.distance_threshold:  # ❌ 逻辑相反
    return None
```

#### 2. 索引不匹配导致的数据错误
**位置**: `SemanticCache.py:74-77`
```python
# 错误代码
filtered_ind = ind[0][dis[0] < self.distance_threshold]
filtered_prompts = [pormpts[i] for i in filtered_ind]  # ❌ 变量名错误 + 索引不匹配
```


#### 3. 缺乏原子性导致的数据不一致
**位置**: `SemanticCache.py:46-51`
```python
# 问题代码
self.redis_client.set(redis_key, value)  # 操作1
self.redis_client.rpush(self.prompt_list_key, redis_key)  # 操作2
self.redis_client.expire(redis_key, self.ttl)  # 操作3
```

#### 4. Redis列表无限增长
**位置**: `SemanticCache.py:49`
```python
# 问题代码
self.redis_client.rpush(self.prompt_list_key, redis_key)
```

